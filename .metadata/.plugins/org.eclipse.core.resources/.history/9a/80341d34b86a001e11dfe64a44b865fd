<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reportSignMapper">

	<resultMap id="resultReportSign" type="ReportSign">
		<id property="reportId" column="REPORT_ID" />
		<result property="memberId" column="MEMBER_ID" />
		<result property="reSign" column="RE_SIGN" />
		<result property="reRead" column="RE_READ" />
	</resultMap>
	
	<select id="listCount" parameterType="Search" resultType="_int">
		select count(*)
		from REPORT
		join report_sign using(report_id)
		where member_id = #{ keyword }
	</select>
	
	<select id="selectList" parameterType="Search" resultMap="resultReportSign">
		select * 
		from (select rownum rnum, REPORT_ID, MEMBER_ID, RE_SIGN, 
		           RE_READ
		      from (select *
                    from REPORT
                    join report_sign using(report_id)
		            where member_id = #{ keyword }
		             order by re_date desc, report_id desc))
		where <![CDATA[ rnum >= #{startRow} and rnum <= #{endRow} ]]>
	
	
		select ROWNUM rnum, REPORT_ID, MEMBER_ID, RE_SIGN, RE_READ
		from report
		join report_sign using(report_id)
		order by re_date desc, re_id desc 
		where member_id = #{ keyword } and <![CDATA[ rnum >= #{startRow} and rnum <= #{endRow} ]]>
	</select>
	
</mapper>












